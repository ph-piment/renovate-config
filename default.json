{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:base"],
  "dependencyDashboard": true,
  "timezone": "Asia/Tokyo",
  "schedule": ["after 9am every weekday"],
  "labels": ["dependencies"],
  "prConcurrentLimit": 3,

  "packageRules": [
    {
      "matchPackagePatterns": ["^playwright$"],
      "groupName": "playwright dependencies"
    },
    {
      "matchPackagePatterns": ["^pytest", "^coverage"],
      "groupName": "testing tools"
    },
    {
      "matchManagers": ["gomod", "regex"],
      "matchPackagePatterns": ["^go$"],
      "groupName": "Go dependencies"
    },
    {
      "matchManagers": ["terraform"],
      "groupName": "Terraform dependencies"
    },
    {
      "matchManagers": ["dockerfile"],
      "groupName": "Docker dependencies"
    },
    {
      "matchManagers": ["github-actions"],
      "groupName": "GitHub Actions workflows"
    }
  ],

  "regexManagers": [
    {
      "fileMatch": ["^\\.go-version$"],
      "matchStrings": ["^(?<currentValue>\\d+\\.\\d+(\\.\\d+)?)$"],
      "depNameTemplate": "go",
      "versioningTemplate": "semver"
    },
    {
      "fileMatch": ["^go\\.mod$"],
      "matchStrings": [
        "(?m)^go (?<currentValue>\\d+\\.\\d+(\\.\\d+)?)$",
        "(?m)^toolchain go(?<currentValue>\\d+\\.\\d+(\\.\\d+)?)$"
      ],
      "depNameTemplate": "go",
      "versioningTemplate": "golang"
    },
    {
      "fileMatch": ["^go\\.work$"],
      "matchStrings": ["(?m)^toolchain go(?<currentValue>\\d+\\.\\d+(\\.\\d+)?)$"],
      "depNameTemplate": "go",
      "versioningTemplate": "semver"
    },
    {
      "fileMatch": ["^docker-compose\\.ya?ml$"],
      "matchStrings": ["golangci/golangci-lint:v(?<currentValue>\\d+\\.\\d+\\.\\d+)"],
      "depNameTemplate": "golangci/golangci-lint",
      "versioningTemplate": "semver"
    },
    {
      "fileMatch": [".github/workflows/.*\\.ya?ml$"],
      "matchStrings": ["version:\\s*v(?<currentValue>\\d+\\.\\d+\\.\\d+)"],
      "depNameTemplate": "golangci-lint",
      "versioningTemplate": "semver"
    }
  ]
}
